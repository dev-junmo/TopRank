<div class="web" *ifDesktop>
    <!-- 컨텐츠 타이틀 영역 start -->
    <div class="title-area">
        <div class="title-wrap">
        <h2 class="title">키워드 구매하기</h2>
        <!-- <span class="sub-title">내가 궁금한 상품 순위, 실시간으로 확인해보세요.</span> -->
        </div>
    </div>
    <!-- //컨텐츠 타이틀 영역 end -->

    <form [formGroup]="purchaseForm" (submit)="onSubmitPurchase()">
    <!-- 판매자 상품 start -->
    <div class="seller-product">
        <div class="payment-sub-title">
            <h3>판매자 상품</h3>
            <span class="description">랭킹 추적될 판매자 상품입니다.</span>
        </div>
        <tb-goods-infobox-view
            [data]="goodsData"
            [isShowTrackingBtn]="false"
            [alignTackingBtn]="'bottom'"
        ></tb-goods-infobox-view>
    </div>
    <!-- //검색 결과 end -->

    <!-- 키워드 선택 start -->
    <div class="keyword-choice">
        <div class="payment-sub-title">
            <h3>키워드 선택</h3>
            <span class="description">선택된 키워드로 판매자 상품에 대한 랭킹 추적과 분석이 이뤄집니다.</span>
        </div>
        <div class="keyword-choice-box">
            <div class="keyword-area">
                <div class="chosen-keyword" *ngFor="let keyword of keywords">
                    {{keyword}}
                    <button (click)="onClickRemoveKeyword(keyword)">
                        <img src="assets/images/payment/ic_delete_red_32.png" alt="X버튼">
                    </button>
                </div>
                <div class="chosen-keyword null" *ngIf="!keywords || keywords.length == 0">추가된 키워드가 없습니다.</div>
            </div>
            <!-- 추가 키워드가 없을 시 -->
            <div class="keyword-input" *ngIf="keywords && keywords.length == 0">
                <form>
                    <input type="text" [(ngModel)]="newKeyword" [ngModelOptions]="{standalone: true}" placeholder="해당 상품에 추가하고 싶은 키워드를 입력해주세요.">
                    <button class="keyword-add" (click)="onClickAddKeyword(newKeyword)">키워드 추가</button>
                </form>
            </div>
        </div>
    </div>
    <!-- 키워드 선택 end -->

    <!-- 상품 옵션 선택 start -->
    <div class="option-choice">
        <div class="payment-sub-title">
        <h3>상품 옵션 선택</h3>
        <span class="description">상품의 종류와 기간, 자동 연장 여부를 선택할 수 있습니다.</span>
        </div>
        <div class="option-choice-box">
        <div class="product-type">
            <span>상품 종류</span>
            <div class="selectbox">
                <select formControlName="product_type" (change)="onChangeOption()">
                    <option value="A">A <span>(1일 1회 순위 확인권)</span></option>
                    <option value="B">B <span>(30분마다 순위 확인권)</span></option>
                    <option value="C">C <span>(10분마다 순위 확인권)</span></option>
                </select>
            </div>
        </div>
        <div class="product-time">
            <span>상품 기간</span>
            <div class="selectbox">
                <select formControlName="product_period" (change)="onChangeOption()">
                    <option value="7">7일</option>
                    <option value="15">15일</option>
                    <option value="30">30일</option>
                    <option value="90">90일</option>
                </select>
            </div>
        </div>
        <div class="auto-extend">
            <span>자동 연장 여부</span>
            <div class="selectbox">
                <select formControlName="auto_extension" (change)="onChangeOption()">
                    <option value="Y">자동 연장</option>
                    <option value="N">수동 연장</option>
                </select>
            </div>
        </div>
        <div class="auto-extend-check">
            <label for="check" *ngIf="purchaseForm.value.auto_extension == 'Y'">
            <input type="checkbox" id="check" name="check" formControlName="is_auto_extension_priority"> 
            <span class="checkbox"></span>
                <p>자동 연장 상품을 여러 개 보유하고 있을 시, 자동 연장 우선순위로 지정합니다.</p>
            </label>
        </div>
        <button type="button" class="choice-btn" (click)="onClickSelectBtn()">선택</button>
        </div>
    </div>
    <!-- 상품 옵션 선택 end -->

    <!-- 최종 주문 정보 start -->
    <div class="final-order">
        <div class="payment-sub-title">
        <h3>최종 주문 정보</h3>
        </div>
        <div class="final-order-info">
        <ul>
            <li>
            <span class="order-txt">상품 금액</span>
            <span class="order-value">
                <strong>{{purchaseInfo.productPoint}}</strong> P
            </span>
            </li>
            <li>
            <span class="order-txt">상품 기간</span>
            <span class="order-value">
                <strong>{{purchaseInfo.productPeriod}}</strong>일
            </span>
            </li>
            <li>
                <span class="order-txt">키워드 개수</span>
                <span class="order-value">
                    <strong>{{purchaseInfo.productCount}}</strong>개
                </span>
            </li>
        </ul>
        <div class="total">
            <span class="order-txt">총 결제 포인트</span>
            <span class="order-value">
            <strong>{{purchaseInfo.productTotalPoint | number}}</strong> P
            </span>
        </div>
        </div>
    </div>
    <!-- 최종 주문 정보 end -->

    <!-- 결제 방법 start -->
    <div class="pay-way">
        <div class="payment-sub-title">
        <h3>결제 방법</h3>
        </div>
        <div class="pay-way-box">
        <div class="free-point dis">
            <span class="point-title">무료 포인트</span>
            <div class="my-point">
                <input type="number" readonly formControlName="use_free_point">
                <button disabled>모두 사용</button>
                <span>보유 포인트 <strong>{{paymentInfo.freePoint | number}} P</strong></span>
            </div>
        </div>
        <div class="charge-point dis">
            <span class="point-title">
            충전 포인트
            <span>무료 포인트 모두 소진 후 차감됩니다.</span>
            </span>
            <div class="my-point">
                <input type="number" value="0" readonly formControlName="use_point">
                <button disabled>모두 사용</button>
                <span>보유 포인트 <strong>{{paymentInfo.chargePoint | number}} P</strong></span>
            </div>
        </div>
        </div>
        <div class="agree-check">
        <label>
            <input type="checkbox" [(ngModel)]="isAgreePayment" [ngModelOptions]="{standalone: true}">
            <span class="checkbox"></span>
            <p>위 주문 내용을 확인 하였으며, 회원 본인은 개인정보 이용 및 제공 및 결제에 동의합니다.</p>
        </label>
        </div>
        <button type="submit" class="purchase-btn" [disabled]="!_isSelectedSelBtn || !keywords || keywords.length == 0">구매하기</button>
    </div>
    <!-- 결제 방법 end -->
    </form>
</div>

<div class="mobile" *ifMobile>
    <div id="contents">
        <!-- 헤더 영역 start -->
        <div class="contents-header">
            <div class="contents-title">
                <img src="assets/images/svg/ic_payment_keyword_color_40.svg" alt="">
                <h2>키워드 구매하기</h2>
            </div>
        </div>
        <!-- //헤더 영역 end -->
        <form [formGroup]="purchaseForm" (submit)="onSubmitPurchase()">
            <!-- 판매자 상품 start -->
            <div class="seller-product-area">
                <div class="pay-contents-title">
                    <h3>판매자 상품</h3>
                    <span>랭킹 추적될 판매자 상품입니다.</span>
                </div>
                <tb-goods-infobox-view
                    [data]="goodsData"
                    [isShowTrackingBtn]="false"
                    [alignTackingBtn]="'bottom'"
                ></tb-goods-infobox-view>
            </div>
            <!-- //판매자 상품 end -->

            <div class="line"></div>

            <!-- 키워드 선택 start -->
            <div class="keyword-select-area">
                <div class="pay-contents-title">
                    <h3>키워드 선택</h3>
                    <span>선택된 키워드로 분석이 이뤄집니다.</span>
                </div>
                <div class="add-keywords-box">
                    <div class="added-keywords-area">
                        <div class="added-keywords" *ngFor="let keyword of keywords">
                            <span>{{keywords}}</span>
                            <button type="button" (click)="onClickRemoveKeyword(keyword)">
                                <img src="assets/images/svg/ic_ic_delete_red_24.svg" alt="삭제">
                            </button>
                        </div>
                        <div class="added-keywords-null" *ngIf="!keywords || keywords.length == 0">추가된 키워드가 없습니다.</div>
                    </div>
                    <div *ngIf="keywords && keywords.length == 0">
                        <form>
                            <input type="text" [(ngModel)]="newKeyword" [ngModelOptions]="{standalone: true}" class="keyword-search" placeholder="추가하고 싶은 키워드를 입력해주세요.">
                            <button type="submit" (click)="onClickAddKeyword(newKeyword)">키워드 추가</button>
                        </form>
                    </div>
                </div>
            </div>
            <!-- //키워드 선택 end -->

            <!-- 상품 옵션 선택 start -->
            <div class="product-options-area">
                <div class="pay-contents-title">
                    <h3>상품 옵션 선택</h3>
                </div>
                <div class="product-options-box">
                    <div class="product-type">
                        <span>상품 종류</span>
                        <div class="selectbox">
                            <button type="button" class="label">
                                {{purchaseForm.value.product_type}} 
                                <span>{{productOptionSelect.productRankingCheck}}</span>
                            </button>
                            <select formControlName="product_type" (change)="onChangeOption()">
                                <option value="A">A <span>(1일 1회 순위 확인권)</span></option>
                                <option value="B">B <span>(30분마다 순위 확인권)</span></option>
                                <option value="C">C <span>(10분마다 순위 확인권)</span></option>
                            </select>
                        </div>
                    </div>
                    <div class="product-time">
                        <span>상품 기간</span>
                        <div class="selectbox">
                            <button class="label">{{purchaseForm.value.product_period}}일</button>
                            <select formControlName="product_period" (change)="onChangeOption()">
                                <option value="7">7일</option>
                                <option value="15">15일</option>
                                <option value="30">30일</option>
                                <option value="90">90일</option>
                            </select>
                        </div>
                    </div>
                    <div class="auto-extend">
                        <span>자동 연장 여부</span>
                        <div class="selectbox">
                            <button class="label">
                                {{productOptionSelect.autoExtend}}
                            </button>
                            <select formControlName="auto_extension" (change)="onChangeOption()">
                                <option value="Y">자동 연장</option>
                                <option value="N">수동 연장</option>
                            </select>
                        </div>
                    </div>
                    <div class="auto-extend-check">
                        <label for="check" *ngIf="purchaseForm.value.auto_extension == 'Y'">
                            <input type="checkbox" id="check" name="check" formControlName="is_auto_extension_priority">
                            <span class="checkbox"></span>
                            <p>자동 연장 상품을 여러 개 보유하고 있을 시, 자동 연장 우선순위로 지정합니다.</p>
                        </label>
                    </div>
                    <button type="button" class="choice-btn" (click)="onClickSelectBtn()">선택</button>
                </div>
            </div>
            <!-- //상품 옵션 선택 end -->

            <div class="line"></div>

            <!-- 최종 주문 정보 start -->
            <div class="final-order-info-area">
                <div class="pay-contents-title">
                    <h3>최종 주문 정보</h3>
                </div>
                <div class="final-order-info">
                    <ul>
                        <li>
                            <span>상품 금액</span>
                            <b><span>{{purchaseInfo.productPoint}}</span> P
                            </b>
                        </li>
                        <li>
                            <span>상품 기간</span>
                            <b><span>{{purchaseInfo.productPeriod}}</span> 일</b>
                        </li>
                        <li>
                            <span>키워드 개수</span>
                            <b><span>{{purchaseInfo.productCount}}</span> 개</b>
                        </li>
                        <li>
                            <span>총 결제 포인트</span>
                            <b><span>{{purchaseInfo.productTotalPoint | number}}</span> P
                            </b>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- //최종 주문 정보 end -->

            <!-- 결제 방법 start -->
            <div class="pay-method-area">
                <div class="pay-contents-title">
                    <h3>결제 방법</h3>
                </div>
                <div class="pay-method-box">
                    <div class="free-point-area point-area">
                        <span class="point-title">무료 포인트</span>
                        <div class="point-input">
                            <input type="text" placeholder="" disabled formControlName="use_free_point">
                            <button class="all-enabled-btn" disabled>모두 사용</button>
                        </div>
                        <p class="retention-points">
                            보유 포인트
                            <b><span>{{paymentInfo.freePoint | number}}</span> P</b>
                        </p>
                    </div>
                    <div class="charging-point-area point-area">
                        <span class="point-title">충전 포인트</span>
                        <p class="point-description">무료 포인트 모두 소진 후 차감됩니다.</p>
                        <div class="point-input">
                            <input type="text" placeholder="" disabled formControlName="use_point">
                            <button class="all-enabled-btn" disabled>모두 사용</button>
                        </div>
                        <p class="retention-points">
                            보유 포인트
                            <b><span>{{paymentInfo.chargePoint | number}} </span>P</b>
                        </p>
                    </div>
                </div>
                <div class="consent-check">
                    <label for="check-consent">
                        <input type="checkbox" id="check-consent" name="check" [(ngModel)]="isAgreePayment" [ngModelOptions]="{standalone: true}">
                        <span class="checkbox"></span>
                        <p>위 주문 내용을 확인 하였으며, 회원 본인은 개인정보 이용 및 제공 및 결제에 동의합니다.</p>
                    </label>
                </div>
            </div>
            <!-- 결제 방법 end -->

            <!-- 결제 버튼 start -->
            <div class="purchase-area">
                <button class="purchase-btn" [disabled]="!_isSelectedSelBtn || !keywords || keywords.length == 0">구매하기</button>
            </div>
            <!-- 결제 버튼 end -->

        </form>
    </div>
</div>