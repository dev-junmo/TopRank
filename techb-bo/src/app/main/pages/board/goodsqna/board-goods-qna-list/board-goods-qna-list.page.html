<!-- header-->
<bo-page-header [imgUrl]="'assets/img/03-5-board-2.svg'" [title]="'상품문의 관리'">
</bo-page-header>

<div class="list-section">

    <!-- query form -->
    <board-goods-qna-query-form [setQuery]="query"(query)="reloadWithQuery($event)"></board-goods-qna-query-form>
    <!-- space -->
    <bo-page-padding></bo-page-padding>

    <div class="list-wrap-se">
        <!-- list -->
        <div style="margin: auto; max-width: 100%; margin-bottom: 50px;">
            <data-table #bsDatatable
                headerTitle="datatable"
                [header]="true"
                [items]="items"
                [itemCount]="itemCount"
                [indexColumn]="true"
                [selectColumn]="boardConfig?.auth.write"
                (reload)="reloadItems($event)"
                [sortBy] = "'seq'"
                [sortAsc] = "false">

                <bs-header-button-config
                    *ngIf="boardConfig?.auth.write"
                    id = "id-board-list-selected-btn"
                    [title] = "'선택삭제'"
                    [styleType] = "'square-s-greyborder-btn'"
                    (click) = "deleteSelectedItem($event , 'seq')">
                </bs-header-button-config>

                <!-- <data-table-column
                    [property]="'seq'"
                    [header]="'번호'"
                    [sortable]="true"
                    [width]="50">
                </data-table-column> -->

                <data-table-column
                    [property]="'category'"
                    [header]="'분류'"
                    [align]="'center'"
                    [sortable]="true"
                    [width]="100">
                </data-table-column>
                <!-- <div class="content">
                        <bs-select [name]="'category'"
                            [formGroup]="bsForm"
                            [optionApiUrl]="'admin/board/boardmanager/notice'"
                            [optionRoot]="'category'">
                        </bs-select>
                    </div> -->
                <data-table-column
                    [property]="'secret'"
                    [header]="'비밀글'"
                    [width]="65">
                    <ng-template #dataTableCell let-item="item">
                        <span *ngIf="item.secret == 1"><img src="/assets/img/board/icon_lock.png" /></span>
                        <span *ngIf="item.secret == 0" style="display: none;">공개글</span>
                    </ng-template>
                </data-table-column>

                <data-table-column
                    [property]="'goods_image'"
                    [header]="'이미지'"
                    [width]="65"
                    [sortable]="false">
                    <!-- <ng-template #dataTableCell let-item="item" >
                        <img (click)="updateItem(item.goods_seq)" [src] = "item.goods_image"  style="width: 44px; height: 44px;">
                    </ng-template> -->
                    <ng-template #dataTableCell let-item="item" >
                        <a target="_blank" href="{{clientURL+'/goods/view/'+item.goods_seq}}">
                            <img [src]="item.goods_image"  style="width: 44px; height: 44px;">
                        </a>
                    </ng-template>
                </data-table-column>

                <data-table-column
                    [property]="'goods_name'"
                    [header]="'상품명'"
                    [width]="230"
                    [align]="'left'"
                    [sortable]="false"
                    [clickable]="true">
                    <ng-template #dataTableCell let-item="item" >
                        <!-- <span (click)="onClickViewItem(item , template ,'goodsqna')" >{{item.goods?.goods_name}}</span> -->
                        <!-- <span class="goods_name" routerLink="/main/goods/goods/update/{{item.goods_seq}}">{{item.goods?.goods_name}}</span> -->
                        <span class="goods_name clickable"  routerLink="../../../goods/goods/update/{{item.goods_seq}}" >{{item.goods?.goods_name}}</span>
                    </ng-template>
                </data-table-column>

                <data-table-column
                    [property]="'subject'"
                    [header]="'제목/내용'"
                    [align]="'left'"

                    [clickable]="true">
                    <ng-template #dataTableCell let-item="item">
                        <div (click)="onClickViewItem(item , template)">
                            <div class="table-con-overflow"
                                [innerHTML]="item?.subject | removeTag">
                            </div>
                            <div class="table-con-overflow"
                                [innerHTML]="item?.contents | removeTag">
                            </div>
                        </div>
                        <div *ngIf="item.provider_name" style="font-weight: bold;">[{{item.provider_name}}]</div>
                    </ng-template>
                </data-table-column>

                <!-- <data-table-column
                    [property]="'contents'"
                    [header]="'문의내용'"
                    [align]="'left'"
                    >
                    <ng-template #dataTableCell let-item="item">
                        <div  class="table-con-overflow" style="max-height:35px;width:250px"  (click)="onClickViewItem(item , template ,'myqna')" [innerHTML]="item?.contents"></div>
                    </ng-template>
                </data-table-column> -->

                <!-- <data-table-column
                    [property]="'re_contents'"
                    [header]="'답변내용'">
                    <ng-template #dataTableCell let-item="item">
                        <div class="table-con-overflow" style="max-height:35px;width:250px"  (click)="onClickViewItem(item , template ,'myqna')" [innerHTML]="item?.re_contents" ></div>
                    </ng-template>
                </data-table-column> -->
                <!-- <data-table-column
                    [property]="'subject'"
                    [header]="'제목'"
                    >
                    <ng-template #dataTableCell let-item="item" >
                        <span (click)="onClickViewItem(item , template ,'goodsqna')" >{{item?.subject}}</span>
                    </ng-template>
                </data-table-column> -->

                <data-table-column
                    [header]="'화면보기'"
                    [width]="120">
                    <ng-template #dataTableHeader let-item="item">
                        화면보기
                    </ng-template>
                    <ng-template #dataTableCell let-item="item">
                        <a target="_blank" href="{{apiURL + '/admin/gateway/entrance?returnUrl=' + clientURL+'/goods/view/'+item.goods_seq+'?nocache=1'}}">
                            <bo-page-button [type]="'s-lightnavy'" [title]="'사용자화면'"></bo-page-button>
                        </a>
                    </ng-template>
                </data-table-column>

                <data-table-column
                    [property]="'name'"
                    [header]="'작성자'"
                    [width]="100">
                </data-table-column>
                <data-table-column
                    [property]="'hit'"
                    [header]="'조회수'"
                    [width]="70">
                </data-table-column>
                <data-table-column
                    [property]="'regist_date'"
                    [header]="'등록일'"
                    [width]="120">
                    <ng-template #dataTableCell let-item="item">
                        {{item?.regist_date | date: 'yyyy-MM-dd HH:mm:ss'}}
                    </ng-template>
                </data-table-column>

                <!-- <data-table-column
                    [property]="'hidden'"
                    [header]="'노출'"
                    [width]="50">
                    <ng-template #dataTableCell let-item="item">
                            <ui-switch (change)="onClickChangeHiddenStatus($event, item)" [checked]="item.hidden == 0" size="small" color="#e7e7e7" switchColor="rgb(234,0,61)" switchOffColor="rgb(150,150,150)" defaultBgColor="#dadada" defaultBoColor="#dadada"></ui-switch>

                    </ng-template>
                </data-table-column> -->
                <data-table-column
                    *ngIf="boardConfig.auth.write"
                    [property]="'hidden'"
                    [header]="'노출'"
                    [width]="50">
                    <ng-template #dataTableCell let-item="item">
                            <ui-switch (change)="onClickChangeHiddenStatus($event, item)" [checked]="item.hidden == 0" size="small" color="#e7e7e7" switchColor="rgb(234,0,61)" switchOffColor="rgb(150,150,150)" defaultBgColor="#dadada" defaultBoColor="#dadada"></ui-switch>

                    </ng-template>
                </data-table-column>

                <data-table-column
                    [property]="'re_contents'"
                    [header]="'답변상태'"
                    [sortable]="true"
                    [width]="120">
                    <ng-template #dataTableCell let-item="item">
                        <div *ngIf="item.re_contents">답변</div>
                        <div *ngIf="!item.re_contents" class="red">미답변</div>
                    </ng-template>
                </data-table-column>

                <!-- <data-table-column
                    [property]="'hidden'"
                    [header]="'노출'"
                    [sortable]="true"
                    [width]="120">
                    <ng-template #dataTableCell let-item="item">
                        <div *ngIf="item.hidden">노출</div>
                        <div *ngIf="!item.hidden" class="red">미노출</div>
                    </ng-template>
                </data-table-column> -->


                <data-table-column
                    *ngIf="boardConfig.auth.write || boardConfig.auth.writeReply"
                    header="manage"
                    [width]="300">
                    <ng-template #dataTableHeader let-item="item">
                        관리
                    </ng-template>
                    <ng-template #dataTableCell let-item="item">
                        <!--답변 -->
                        <bo-button-collection *ngIf="boardConfig.auth.writeReply" class="margin-class"
                            [title]="item.re_contents?'답변수정':'답변등록'"
                            [id]="'recontents'"
                            (click)="onClickGoReplyPage(item.seq)" >
                        </bo-button-collection>

                        <!-- 수정 -->
                        <bo-button-collection *ngIf="boardConfig.auth.write && (boardId !== 'goods_qna' && boardId !== 'mbqna' && boardId !== 'gs_seller_qna')" class="margin-class" [id]="'edit'"
                            (click)="updateItem(item.seq)" ></bo-button-collection>

                        <!-- 삭제 -->
                        <bo-button-collection *ngIf="boardConfig.auth.write" class="margin-class" [id]="'delete'"
                            (click)="deleteItem(item.seq)"></bo-button-collection>
                    </ng-template>
                </data-table-column>
            </data-table>
        </div>
    </div>
</div>

<ng-template #template>
    <board-view [boardItem]="selectedItem" [boardConfig]="boardConfig" [boardId]="'goods_qna'"
        (onClickButton)="onClickButton($event)">
    </board-view>
</ng-template>
