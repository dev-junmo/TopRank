<!-- header-->
<bo-page-header [imgUrl]="'assets/img/coupon-title-img.svg'" [title]="'이벤트 리스트 '">

     <!-- 게시글등록 버튼-->
     <bo-page-button-config id = "id-board-content-list-btn-create"
        [title]="'이벤트 등록'"
        [styleType] = "'square-m-grey-btn'"
        (click) = "createItem()">
    </bo-page-button-config>

</bo-page-header>

<div class="list-section">
<!-- query form -->
    <event-query-form [setQuery]="query"(query)="reloadWithQuery($event)"></event-query-form>

    <bo-page-padding></bo-page-padding>
        <div class="list-wrap">
            이벤트
            <!-- list -->
            <div style="margin: auto; max-width: 100%; margin-bottom: 50px;">
                <data-table #bsDatatable
                    headerTitle="datatable"
                    [header]="true"
                    [items]="items"
                    [itemCount]="itemCount"
                    [indexColumn]="true"
                    [selectColumn]="true"
                    (reload)="reloadItems($event)"
                    [sortBy] = "'seq'"
                    [sortAsc] = "false"
                     >

                    <!-- 선택삭제 버튼-->
                    <bs-header-button-config id = "id-board-content-list-deleteall-btn1"
                    [title] = "'선택삭제'"
                    [styleType] = "'square-s-greyborder-btn'"
                    (click) = "deleteSelectedItem($event, 'seq')">
                    </bs-header-button-config>

                    <!-- 선택삭제 버튼-->
                    <!-- 오른쪽정렬은 버튼순서 역순입니다 -->
                    <!-- <bs-header-button-config id = "id-board-content-list-deleteall-btn2"
                    [title] = "'버튼2'"
                    [styleType] = "'round-m-white'"
                    [align]="'right'"
                    (click) = "onClickDTHeaderBtn($event)">
                    </bs-header-button-config>
                    <bs-header-button-config id = "id-board-content-list-deleteall-btn2"
                    [title] = "'버튼3'"
                    [styleType] = "'round-m-white'"
                    [align]="'right'"
                    (click) = "onClickDTHeaderBtn($event)">
                    </bs-header-button-config> -->

                    <!-- <data-table-column
                        [property]="'seq'"
                        [header]="'번호'"
                        [sortable]="true"
                        [width]="80">
                    </data-table-column> -->

                    <data-table-column
                        [property]="'regist_date'"
                        [header]="'등록일'"
                        [sortable]="true"
                        [width]="150">
                        <ng-template #dataTableCell let-item="item">
                                {{item.regist_date | date: 'yyyy-MM-dd HH:mm'}}
                        </ng-template>
                    </data-table-column>

                    <data-table-column
                        [header]="'이벤트기간'"
                        [sortable]="true"
                        [width]="100">
                        <ng-template #dataTableCell let-item="item">
                                {{item.m_date | date: 'yyyy-MM-dd'}}<br/>
                                {{item.d_date | date: 'yyyy-MM-dd'}}
                        </ng-template>
                    </data-table-column>

                    <data-table-column
                        [property]="'ext_date'"
                        [header]="'당첨발표일'"
                        [sortable]="true"
                        [width]="150">
                        <ng-template #dataTableCell let-item="item">
                            {{item.ext_date | date: 'yyyy-MM-dd HH:mm'}}
                        </ng-template>
                    </data-table-column>

                    <data-table-column
                        [property]="'adddata'"
                        [header]="'배너 이미지'"
                        [width]="90"
                        [sortable]="true">
                        <ng-template #dataTableCell let-item="item" >
                            <img (click)="updateItem(item.adddata)" [src] = "item.adddata"  style="width: 44px; height: 44px;">
                        </ng-template>
                    </data-table-column>

                    <data-table-column
                        [property]="'subject'"
                        [header]="'제목'"
                        [align]="'left'"
                        >
                    </data-table-column>

                    <data-table-column
                        [header]="'화면보기'"
                        [width]="120">
                        <ng-template #dataTableHeader let-item="item">
                            이벤트 보기
                        </ng-template>
                        <ng-template #dataTableCell let-item="item">
                            <a target="_blank" href="{{clientURL+'/board/onlinepromotion/view/' +item.seq }}">
                                <bo-page-button [type]="'s-lightnavy'" [title]="'사용자화면'"></bo-page-button>
                            </a>
                        </ng-template>
                    </data-table-column>

                    <data-table-column
                        [property]="'finish'"
                        [header]="'진행여부'"
                        [width]="80">
                    </data-table-column>

                    <data-table-column
                        [property]="'hidden'"
                        [header]="'노출'"
                        [width]="80">
                        <ng-template #dataTableCell let-item="item">
                            <ui-switch (change)="onClickChangeHiddenStatus($event, item)" [checked]="item.hidden == 0" size="small" color="#e7e7e7" switchColor="rgb(234,0,61)" switchOffColor="rgb(150,150,150)" defaultBgColor="#dadada" defaultBoColor="#dadada"></ui-switch>
                        </ng-template>
                    </data-table-column>
                    <data-table-column
                        header="manage"
                        [width]="300">
                        <ng-template #dataTableHeader let-item="item">
                            수정
                        </ng-template>
                        <ng-template #dataTableCell let-item="item">
                                <bo-button-collection class="margin-class" [id]="'edit'" (click)="updateItem(item.seq)" ></bo-button-collection>
                                <bo-button-collection [id]="'copy'" (click)="onClickCopy(item.boardid , item.seq)"></bo-button-collection>
                                <bo-button-collection class="margin-class" [id]="'delete'" (click)="deleteItem(item.seq)"></bo-button-collection>
                        </ng-template>
                </data-table-column>
                </data-table>
            </div>
        </div>
</div>
